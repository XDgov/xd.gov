!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(n.d3=n.d3||{})}(this,function(n){"use strict";function f(n,r){return n<r?-1:r<n?1:r<=n?0:NaN}function r(u){var t;return 1===u.length&&(t=u,u=function(n,r){return f(t(n),r)}),{left:function(n,r,t,e){for(null==t&&(t=0),null==e&&(e=n.length);t<e;){var o=t+e>>>1;u(n[o],r)<0?t=1+o:e=o}return t},right:function(n,r,t,e){for(null==t&&(t=0),null==e&&(e=n.length);t<e;){var o=t+e>>>1;0<u(n[o],r)?e=o:t=1+o}return t}}}var t=r(f),M=t.right,t=t.left;function h(n,r){return[n,r]}function a(n){return null===n?NaN:+n}function e(n,r){var t,e,o=n.length,u=0,l=-1,f=0,i=0;if(null==r)for(;++l<o;)isNaN(t=a(n[l]))||(i+=(e=t-f)*(t-(f+=e/++u)));else for(;++l<o;)isNaN(t=a(r(n[l],l,n)))||(i+=(e=t-f)*(t-(f+=e/++u)));if(1<u)return i/(u-1)}function o(n,r){n=e(n,r);return n&&Math.sqrt(n)}function u(n,r){var t,e,o,u=n.length,l=-1;if(null==r){for(;++l<u;)if(null!=(t=n[l])&&t<=t)for(e=o=t;++l<u;)null!=(t=n[l])&&(t<e&&(e=t),o<t)&&(o=t)}else for(;++l<u;)if(null!=(t=r(n[l],l,n))&&t<=t)for(e=o=t;++l<u;)null!=(t=r(n[l],l,n))&&(t<e&&(e=t),o<t)&&(o=t);return[e,o]}var l=Array.prototype,i=l.slice,c=l.map;function p(n){return function(){return n}}function d(n){return n}function y(n,r,t){n=+n,r=+r,t=(o=arguments.length)<2?(r=n,n=0,1):o<3?1:+t;for(var e=-1,o=0|Math.max(0,Math.ceil((r-n)/t)),u=new Array(o);++e<o;)u[e]=n+e*t;return u}var s=Math.sqrt(50),g=Math.sqrt(10),v=Math.sqrt(2);function N(n,r,t){r=(r-n)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),t=r/Math.pow(10,n);return 0<=n?(s<=t?10:g<=t?5:v<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s<=t?10:g<=t?5:v<=t?2:1)}function m(n,r,t){var t=Math.abs(r-n)/Math.max(0,t),e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),t=t/e;return s<=t?e*=10:g<=t?e*=5:v<=t&&(e*=2),r<n?-e:e}function w(n){return Math.ceil(Math.log(n.length)/Math.LN2)+1}function A(n,r,t){var e,o;if(null==t&&(t=a),e=n.length)return(r=+r)<=0||e<2?+t(n[0],0,n):1<=r?+t(n[e-1],e-1,n):(e=(e-1)*r,(o=+t(n[r=Math.floor(e)],r,n))+(+t(n[r+1],r+1,n)-o)*(e-r))}function x(n,r){var t,e,o=n.length,u=-1;if(null==r){for(;++u<o;)if(null!=(t=n[u])&&t<=t)for(e=t;++u<o;)null!=(t=n[u])&&t<e&&(e=t)}else for(;++u<o;)if(null!=(t=r(n[u],u,n))&&t<=t)for(e=t;++u<o;)null!=(t=r(n[u],u,n))&&t<e&&(e=t);return e}function b(n){if(!(o=n.length))return[];for(var r=-1,t=x(n,q),e=new Array(t);++r<t;)for(var o,u=-1,l=e[r]=new Array(o);++u<o;)l[u]=n[u][r];return e}function q(n){return n.length}n.bisect=M,n.bisectRight=M,n.bisectLeft=t,n.ascending=f,n.bisector=r,n.cross=function(n,r,t){var e,o,u,l,f=n.length,i=r.length,a=new Array(f*i);for(null==t&&(t=h),e=u=0;e<f;++e)for(l=n[e],o=0;o<i;++o,++u)a[u]=t(l,r[o]);return a},n.descending=function(n,r){return r<n?-1:n<r?1:n<=r?0:NaN},n.deviation=o,n.extent=u,n.histogram=function(){var s=d,g=u,v=w;function r(n){for(var r,t=n.length,e=new Array(t),o=0;o<t;++o)e[o]=s(n[o],o,n);var u=g(e),l=u[0],f=u[1],i=v(e,l,f);Array.isArray(i)||(i=m(l,f,i),i=y(Math.ceil(l/i)*i,f,i));for(var a=i.length;i[0]<=l;)i.shift(),--a;for(;i[a-1]>f;)i.pop(),--a;var h,c=new Array(a+1);for(o=0;o<=a;++o)(h=c[o]=[]).x0=0<o?i[o-1]:l,h.x1=o<a?i[o]:f;for(o=0;o<t;++o)l<=(r=e[o])&&r<=f&&c[M(i,r,0,a)].push(n[o]);return c}return r.value=function(n){return arguments.length?(s="function"==typeof n?n:p(n),r):s},r.domain=function(n){return arguments.length?(g="function"==typeof n?n:p([n[0],n[1]]),r):g},r.thresholds=function(n){return arguments.length?(v="function"==typeof n?n:Array.isArray(n)?p(i.call(n)):p(n),r):v},r},n.thresholdFreedmanDiaconis=function(n,r,t){return n=c.call(n,a).sort(f),Math.ceil((t-r)/(2*(A(n,.75)-A(n,.25))*Math.pow(n.length,-1/3)))},n.thresholdScott=function(n,r,t){return Math.ceil((t-r)/(3.5*o(n)*Math.pow(n.length,-1/3)))},n.thresholdSturges=w,n.max=function(n,r){var t,e,o=n.length,u=-1;if(null==r){for(;++u<o;)if(null!=(t=n[u])&&t<=t)for(e=t;++u<o;)null!=(t=n[u])&&e<t&&(e=t)}else for(;++u<o;)if(null!=(t=r(n[u],u,n))&&t<=t)for(e=t;++u<o;)null!=(t=r(n[u],u,n))&&e<t&&(e=t);return e},n.mean=function(n,r){var t,e=n.length,o=e,u=-1,l=0;if(null==r)for(;++u<e;)isNaN(t=a(n[u]))?--o:l+=t;else for(;++u<e;)isNaN(t=a(r(n[u],u,n)))?--o:l+=t;if(o)return l/o},n.median=function(n,r){var t,e=n.length,o=-1,u=[];if(null==r)for(;++o<e;)isNaN(t=a(n[o]))||u.push(t);else for(;++o<e;)isNaN(t=a(r(n[o],o,n)))||u.push(t);return A(u.sort(f),.5)},n.merge=function(n){for(var r,t,e,o=n.length,u=-1,l=0;++u<o;)l+=n[u].length;for(t=new Array(l);0<=--o;)for(r=(e=n[o]).length;0<=--r;)t[--l]=e[r];return t},n.min=x,n.pairs=function(n,r){null==r&&(r=h);for(var t=0,e=n.length-1,o=n[0],u=new Array(e<0?0:e);t<e;)u[t]=r(o,o=n[++t]);return u},n.permute=function(n,r){for(var t=r.length,e=new Array(t);t--;)e[t]=n[r[t]];return e},n.quantile=A,n.range=y,n.scan=function(n,r){if(t=n.length){var t,e,o=0,u=0,l=n[u];for(null==r&&(r=f);++o<t;)(r(e=n[o],l)<0||0!==r(l,l))&&(l=e,u=o);return 0===r(l,l)?u:void 0}},n.shuffle=function(n,r,t){for(var e,o,u=(null==t?n.length:t)-(r=null==r?0:+r);u;)o=Math.random()*u--|0,e=n[u+r],n[u+r]=n[o+r],n[o+r]=e;return n},n.sum=function(n,r){var t,e=n.length,o=-1,u=0;if(null==r)for(;++o<e;)(t=+n[o])&&(u+=t);else for(;++o<e;)(t=+r(n[o],o,n))&&(u+=t);return u},n.ticks=function(n,r,t){var e,o,u,l,f=-1;if(t=+t,(n=+n)==(r=+r)&&0<t)return[n];if((e=r<n)&&(o=n,n=r,r=o),0===(l=N(n,r,t))||!isFinite(l))return[];if(0<l)for(n=Math.ceil(n/l),r=Math.floor(r/l),u=new Array(o=Math.ceil(r-n+1));++f<o;)u[f]=(n+f)*l;else for(n=Math.floor(n*l),r=Math.ceil(r*l),u=new Array(o=Math.ceil(n-r+1));++f<o;)u[f]=(n-f)/l;return e&&u.reverse(),u},n.tickIncrement=N,n.tickStep=m,n.transpose=b,n.variance=e,n.zip=function(){return b(arguments)},Object.defineProperty(n,"__esModule",{value:!0})});
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],t):t((n=n||self).d3=n.d3||{},n.d3)}(this,function(n,N){"use strict";function t(){return new _}function _(){this.reset()}_.prototype={constructor:_,reset:function(){this.s=this.t=0},add:function(n){k(w,n,this.t),k(this,w.s,this.s),this.s?this.t+=w.t:this.s=w.t},valueOf:function(){return this.s}};var w=new _;function k(n,t,r){var i=n.s=t+r,e=i-t;n.t=t-(i-e)+(r-e)}var j=1e-6,F=1e-12,R=Math.PI,C=R/2,H=R/4,P=2*R,q=180/R,z=R/180,b=Math.abs,I=Math.atan,L=Math.atan2,A=Math.cos,W=Math.ceil,X=Math.exp,Y=Math.log,B=Math.pow,O=Math.sin,l=Math.sign||function(n){return 0<n?1:n<0?-1:0},G=Math.sqrt,D=Math.tan;function U(n){return 1<n?0:n<-1?R:Math.acos(n)}function T(n){return 1<n?C:n<-1?-C:Math.asin(n)}function Z(n){return(n=O(n/2))*n}function r(){}function J(n,t){n&&Q.hasOwnProperty(n.type)&&Q[n.type](n,t)}var K={Feature:function(n,t){J(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)J(r[i].geometry,t)}},Q={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)n=r[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){V(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)V(r[i],t,0)},Polygon:function(n,t){$(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)$(r[i],t)},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)J(r[i],t)}};function V(n,t,r){var i,e=-1,o=n.length-r;for(t.lineStart();++e<o;)i=n[e],t.point(i[0],i[1],i[2]);t.lineEnd()}function $(n,t){var r=-1,i=n.length;for(t.polygonStart();++r<i;)V(n[r],t,1);t.polygonEnd()}function a(n,t){n&&K.hasOwnProperty(n.type)?K[n.type](n,t):J(n,t)}var nn,tn,rn,en,on,un=t(),cn=t(),i={point:r,lineStart:r,lineEnd:r,polygonStart:function(){un.reset(),i.lineStart=an,i.lineEnd=ln},polygonEnd:function(){var n=+un;cn.add(n<0?P+n:n),this.lineStart=this.lineEnd=this.point=r},sphere:function(){cn.add(P)}};function an(){i.point=fn}function ln(){pn(nn,tn)}function fn(n,t){i.point=pn,nn=n,tn=t,rn=n*=z,en=A(t=(t*=z)/2+H),on=O(t)}function pn(n,t){var r=(n*=z)-rn,i=0<=r?1:-1,r=i*r,e=A(t=(t*=z)/2+H),t=O(t),o=on*t,u=en*e+o*A(r),o=o*i*O(r);un.add(L(o,u)),rn=n,en=e,on=t}function sn(n){return[L(n[1],n[0]),T(n[2])]}function hn(n){var t=n[0],n=n[1],r=A(n);return[r*A(t),r*O(t),O(n)]}function gn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function vn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function dn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function En(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function yn(n){var t=G(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var f,p,s,h,Sn,mn,Mn,xn,g,v,_n,Nn,wn,Rn,Cn,Pn,An,jn,qn,zn,bn,Ln,On,d,E,y,Gn=t(),S={point:Tn,lineStart:Fn,lineEnd:Hn,polygonStart:function(){S.point=In,S.lineStart=Wn,S.lineEnd=Xn,Gn.reset(),i.polygonStart()},polygonEnd:function(){i.polygonEnd(),S.point=Tn,S.lineStart=Fn,S.lineEnd=Hn,un<0?(f=-(s=180),p=-(h=90)):j<Gn?h=90:Gn<-j&&(p=-90),v[0]=f,v[1]=s},sphere:function(){f=-(s=180),p=-(h=90)}};function Tn(n,t){g.push(v=[f=n,s=n]),t<p&&(p=t),h<t&&(h=t)}function kn(n,t){var r,i,e,o,u,c=hn([n*z,t*z]);xn?(r=vn(xn,c),yn(r=vn([r[1],-r[0],0],r)),r=sn(r),u=n-Sn,o=r[0]*q*(e=0<u?1:-1),(u=180<b(u))^(e*Sn<o&&o<e*n)?(i=r[1]*q)>h&&(h=i):u^(e*Sn<(o=(360+o)%360-180)&&o<e*n)?(i=-r[1]*q)<p&&(p=i):(t<p&&(p=t),h<t&&(h=t)),u?n<Sn?m(f,n)>m(f,s)&&(s=n):m(n,s)>m(f,s)&&(f=n):f<=s?(n<f&&(f=n),s<n&&(s=n)):Sn<n?m(f,n)>m(f,s)&&(s=n):m(n,s)>m(f,s)&&(f=n)):g.push(v=[f=n,s=n]),t<p&&(p=t),h<t&&(h=t),xn=c,Sn=n}function Fn(){S.point=kn}function Hn(){v[0]=f,v[1]=s,S.point=Tn,xn=null}function In(n,t){var r;xn?(r=n-Sn,Gn.add(180<b(r)?r+(0<r?360:-360):r)):(mn=n,Mn=t),i.point(n,t),kn(n,t)}function Wn(){i.lineStart()}function Xn(){In(mn,Mn),i.lineEnd(),b(Gn)>j&&(f=-(s=180)),v[0]=f,v[1]=s,xn=null}function m(n,t){return(t-=n)<0?t+360:t}function Yn(n,t){return n[0]-t[0]}function Bn(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var e={sphere:r,point:Dn,lineStart:Zn,lineEnd:Qn,polygonStart:function(){e.lineStart=Vn,e.lineEnd=$n},polygonEnd:function(){e.lineStart=Zn,e.lineEnd=Qn}};function Dn(n,t){n*=z;var r=A(t*=z);Un(r*A(n),r*O(n),O(t))}function Un(n,t,r){wn+=(n-wn)/++_n,Rn+=(t-Rn)/_n,Cn+=(r-Cn)/_n}function Zn(){e.point=Jn}function Jn(n,t){n*=z;var r=A(t*=z);d=r*A(n),E=r*O(n),y=O(t),e.point=Kn,Un(d,E,y)}function Kn(n,t){n*=z;var r=A(t*=z),i=r*A(n),r=r*O(n),n=O(t),t=L(G((t=E*n-y*r)*t+(t=y*i-d*n)*t+(t=d*r-E*i)*t),d*i+E*r+y*n);Nn+=t,Pn+=t*(d+(d=i)),An+=t*(E+(E=r)),jn+=t*(y+(y=n)),Un(d,E,y)}function Qn(){e.point=Dn}function Vn(){e.point=nt}function $n(){tt(Ln,On),e.point=Dn}function nt(n,t){Ln=n,On=t,n*=z,t*=z,e.point=tt;var r=A(t);d=r*A(n),E=r*O(n),y=O(t),Un(d,E,y)}function tt(n,t){n*=z;var r=A(t*=z),i=r*A(n),r=r*O(n),n=O(t),t=E*n-y*r,e=y*i-d*n,o=d*r-E*i,u=G(t*t+e*e+o*o),c=T(u),u=u&&-c/u;qn+=u*t,zn+=u*e,bn+=u*o,Nn+=c,Pn+=c*(d+(d=i)),An+=c*(E+(E=r)),jn+=c*(y+(y=n)),Un(d,E,y)}function rt(n){return function(){return n}}function it(r,i){function n(n,t){return n=r(n,t),i(n[0],n[1])}return r.invert&&i.invert&&(n.invert=function(n,t){return(n=i.invert(n,t))&&r.invert(n[0],n[1])}),n}function et(n,t){return[b(n)>R?n+Math.round(-n/P)*P:n,t]}function ot(n,t,r){return(n%=P)?t||r?it(ct(n),at(t,r)):ct(n):t||r?at(t,r):et}function ut(r){return function(n,t){return[(n+=r)>R?n-P:n<-R?n+P:n,t]}}function ct(n){var t=ut(n);return t.invert=ut(-n),t}function at(n,t){var e=A(n),o=O(n),u=A(t),c=O(t);function r(n,t){var r=A(t),i=A(n)*r,n=O(n)*r,r=O(t),t=r*e+i*o;return[L(n*u-t*c,i*e-r*o),T(t*u+n*c)]}return r.invert=function(n,t){var r=A(t),i=A(n)*r,n=O(n)*r,r=O(t),t=r*u-n*c;return[L(n*u+r*c,i*e+t*o),T(t*e-i*o)]},r}function lt(t){function n(n){return(n=t(n[0]*z,n[1]*z))[0]*=q,n[1]*=q,n}return t=ot(t[0]*z,t[1]*z,2<t.length?t[2]*z:0),n.invert=function(n){return(n=t.invert(n[0]*z,n[1]*z))[0]*=q,n[1]*=q,n},n}function ft(n,t,r,i,e,o){if(r){var u=A(t),c=O(t),a=i*r;null==e?(e=t+i*P,o=t-a/2):(e=pt(u,e),o=pt(u,o),(0<i?e<o:o<e)&&(e+=i*P));for(var l,f=e;0<i?o<f:f<o;f-=a)l=sn([u,-c*A(f),-c*O(f)]),n.point(l[0],l[1])}}function pt(n,t){(t=hn(t))[0]-=n,yn(t);n=U(-t[1]);return((-t[2]<0?-n:n)+P-j)%P}function st(){var i,t=[];return{point:function(n,t,r){i.push([n,t,r])},lineStart:function(){t.push(i=[])},lineEnd:r,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],i=null,n}}}function ht(n,t){return b(n[0]-t[0])<j&&b(n[1]-t[1])<j}function gt(n,t,r,i){this.x=n,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function vt(n,t,r,i,o){var u,e,c=[],a=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,r,i=n[0],e=n[t];if(ht(i,e)){if(!i[2]&&!e[2]){for(o.lineStart(),u=0;u<t;++u)o.point((i=n[u])[0],i[1]);return void o.lineEnd()}e[0]+=2*j}c.push(r=new gt(i,n,null,!0)),a.push(r.o=new gt(i,null,r,!1)),c.push(r=new gt(e,n,null,!1)),a.push(r.o=new gt(e,null,r,!0))}}),c.length){for(a.sort(t),dt(c),dt(a),u=0,e=a.length;u<e;++u)a[u].e=r=!r;for(var l,f,p=c[0];;){for(var s=p,h=!0;s.v;)if((s=s.n)===p)return;l=s.z,o.lineStart();do{if(s.v=s.o.v=!0,s.e){if(h)for(u=0,e=l.length;u<e;++u)o.point((f=l[u])[0],f[1]);else i(s.x,s.n.x,1,o);s=s.n}else{if(h)for(l=s.p.z,u=l.length-1;0<=u;--u)o.point((f=l[u])[0],f[1]);else i(s.x,s.p.x,-1,o);s=s.p}}while(l=(s=s.o).z,h=!h,!s.v);o.lineEnd()}}}function dt(n){if(t=n.length){for(var t,r,i=0,e=n[0];++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}et.invert=et;var Et=t();function yt(n){return b(n[0])<=R?n[0]:l(n[0])*((b(n[0])+R)%P-R)}function St(n,t){var r=yt(t),i=t[1],t=O(i),e=[O(r),-A(r),0],o=0,u=0;Et.reset(),1===t?i=C+j:-1===t&&(i=-C-j);for(var c=0,a=n.length;c<a;++c)if(f=(l=n[c]).length)for(var l,f,p=l[f-1],s=yt(p),h=p[1]/2+H,g=O(h),v=A(h),d=0;d<f;++d,s=y,g=m,v=S,p=E){var E=l[d],y=yt(E),S=E[1]/2+H,m=O(S),S=A(S),M=y-s,x=0<=M?1:-1,_=x*M,N=R<_,w=g*m;Et.add(L(w*x*O(_),v*S+w*A(_))),o+=N?M+x*P:M,N^r<=s^r<=y&&(yn(w=vn(hn(p),hn(E))),yn(_=vn(e,w)),(x=(N^0<=M?-1:1)*T(_[2]))<i||i===x&&(w[0]||w[1]))&&(u+=N^0<=M?1:-1)}return(o<-j||o<j&&Et<-j)^1&u}function mt(d,E,y,S){return function(c){var a,l,f,r=E(c),p=st(),s=E(p),h=!1,t={point:i,lineStart:e,lineEnd:o,polygonStart:function(){t.point=g,t.lineStart=u,t.lineEnd=v,l=[],a=[]},polygonEnd:function(){t.point=i,t.lineStart=e,t.lineEnd=o,l=N.merge(l);var n=St(a,S);l.length?(h||(c.polygonStart(),h=!0),vt(l,xt,n,y,c)):n&&(h||(c.polygonStart(),h=!0),c.lineStart(),y(null,null,1,c),c.lineEnd()),h&&(c.polygonEnd(),h=!1),l=a=null},sphere:function(){c.polygonStart(),c.lineStart(),y(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function i(n,t){d(n,t)&&c.point(n,t)}function n(n,t){r.point(n,t)}function e(){t.point=n,r.lineStart()}function o(){t.point=i,r.lineEnd()}function g(n,t){f.push([n,t]),s.point(n,t)}function u(){s.lineStart(),f=[]}function v(){g(f[0][0],f[0][1]),s.lineEnd();var n,t,r,i,e=s.clean(),o=p.result(),u=o.length;if(f.pop(),a.push(f),f=null,u)if(1&e){if(0<(t=(r=o[0]).length-1)){for(h||(c.polygonStart(),h=!0),c.lineStart(),n=0;n<t;++n)c.point((i=r[n])[0],i[1]);c.lineEnd()}}else 1<u&&2&e&&o.push(o.pop().concat(o.shift())),l.push(o.filter(Mt))}return t}}function Mt(n){return 1<n.length}function xt(n,t){return((n=n.x)[0]<0?n[1]-C-j:C-n[1])-((t=t.x)[0]<0?t[1]-C-j:C-t[1])}var _t=mt(function(){return 1},function(l){var f,p=NaN,s=NaN,h=NaN;return{lineStart:function(){l.lineStart(),f=1},point:function(n,t){var r,i,e,o,u,c=0<n?R:-R,a=b(n-p);b(a-R)<j?(l.point(p,s=0<(s+t)/2?C:-C),l.point(h,s),l.lineEnd(),l.lineStart(),l.point(c,s),l.point(n,s),f=0):h!==c&&R<=a&&(b(p-h)<j&&(p-=h*j),b(n-c)<j&&(n-=c*j),a=s,e=t,u=O((r=p)-(i=n)),s=b(u)>j?I((O(a)*(o=A(e))*O(i)-O(e)*(i=A(a))*O(r))/(i*o*u)):(a+e)/2,l.point(h,s),l.lineEnd(),l.lineStart(),l.point(c,s),f=0),l.point(p=n,s=t),h=c},lineEnd:function(){l.lineEnd(),p=s=NaN},clean:function(){return 2-f}}},function(n,t,r,i){var e;null==n?(e=r*C,i.point(-R,e),i.point(0,e),i.point(R,e),i.point(R,0),i.point(R,-e),i.point(0,-e),i.point(-R,-e),i.point(-R,0),i.point(-R,e)):b(n[0]-t[0])>j?(n=n[0]<t[0]?R:-R,i.point(-n,e=r*n/2),i.point(0,e),i.point(n,e)):i.point(t[0],t[1])},[-R,-C]);function Nt(e){var v=A(e),o=6*z,p=0<v,s=b(v)>j;function h(n,t){return A(n)*A(t)>v}function g(n,t,r){var i,e,o,u,c,a,l,f=[1,0,0],p=vn(hn(n),hn(t)),s=gn(p,p),h=p[0],g=s-h*h;return g?(i=vn(f,p),dn(f=En(f,v*s/g),En(p,-v*h/g)),(g=(p=gn(f,s=i))*p-(h=gn(s,s))*(gn(f,f)-1))<0?void 0:(dn(g=En(s,(-p-(i=G(g)))/h),f),g=sn(g),r?(e=n[0],o=t[0],u=n[1],t=t[1],o<e&&(l=e,e=o,o=l),!(a=b((c=o-e)-R)<j)&&t<u&&(l=u,u=t,t=l),(a||c<j?a?0<u+t^g[1]<(b(g[0]-e)<j?u:t):u<=g[1]&&g[1]<=t:R<c^(e<=g[0]&&g[0]<=o))?(dn(l=En(s,(-p+i)/h),f),[g,sn(l)]):void 0):g)):!r&&n}function d(n,t){var r=p?e:R-e,i=0;return n<-r?i|=1:r<n&&(i|=2),t<-r?i|=4:r<t&&(i|=8),i}return mt(h,function(o){var u,c,a,l,f;return{lineStart:function(){l=a=!1,f=1},point:function(n,t){var r,i=[n,t],e=h(n,t),n=p?e?0:d(n,t):e?d(n+(n<0?R:-R),t):0;!u&&(l=a=e)&&o.lineStart(),e===a||(r=g(u,i))&&!ht(u,r)&&!ht(i,r)||(i[2]=1),e!==a?(f=0,e?(o.lineStart(),r=g(i,u),o.point(r[0],r[1])):(r=g(u,i),o.point(r[0],r[1],2),o.lineEnd()),u=r):s&&u&&p^e&&(n&c||!(t=g(i,u,!0))||(f=0,p?(o.lineStart(),o.point(t[0][0],t[0][1]),o.point(t[1][0],t[1][1]),o.lineEnd()):(o.point(t[1][0],t[1][1]),o.lineEnd(),o.lineStart(),o.point(t[0][0],t[0][1],3)))),!e||u&&ht(u,i)||o.point(i[0],i[1]),u=i,a=e,c=n},lineEnd:function(){a&&o.lineEnd(),u=null},clean:function(){return f|(l&&a)<<1}}},function(n,t,r,i){ft(i,e,o,r,n,t)},p?[0,-e]:[-R,e-R])}var wt=1e9,Rt=-wt;function Ct(E,y,S,m){function M(n,t){return E<=n&&n<=S&&y<=t&&t<=m}function x(n,t,r,i){var e=0,o=0;if(null==n||(e=u(n,r))!==(o=u(t,r))||c(n,t)<0^0<r)for(;i.point(0===e||3===e?E:S,1<e?m:y),(e=(e+r+4)%4)!==o;);else i.point(t[0],t[1])}function u(n,t){return b(n[0]-E)<j?0<t?0:3:b(n[0]-S)<j?0<t?2:1:b(n[1]-y)<j?0<t?1:0:0<t?3:2}function _(n,t){return c(n.x,t.x)}function c(n,t){var r=u(n,1),i=u(t,1);return r!==i?r-i:0===r?t[1]-n[1]:1===r?n[0]-t[0]:2===r?n[1]-t[1]:t[0]-n[0]}return function(i){var e,p,o,u,c,a,l,f,s,h,g,v=i,n=st(),t={point:r,lineStart:function(){t.point=d,p&&p.push(o=[]),s=!(h=!0),l=f=NaN},lineEnd:function(){e&&(d(u,c),a&&s&&n.rejoin(),e.push(n.result())),t.point=r,s&&v.lineEnd()},polygonStart:function(){v=n,e=[],p=[],g=!0},polygonEnd:function(){var n=function(){for(var n=0,t=0,r=p.length;t<r;++t)for(var i,e,o=p[t],u=1,c=o.length,a=o[0],l=a[0],f=a[1];u<c;++u)i=l,e=f,l=(a=o[u])[0],f=a[1],e<=m?m<f&&(f-e)*(E-i)<(l-i)*(m-e)&&++n:f<=m&&(l-i)*(m-e)<(f-e)*(E-i)&&--n;return n}(),t=g&&n,r=(e=N.merge(e)).length;(t||r)&&(i.polygonStart(),t&&(i.lineStart(),x(null,null,1,i),i.lineEnd()),r&&vt(e,_,n,x,i),i.polygonEnd()),v=i,e=p=o=null}};function r(n,t){M(n,t)&&v.point(n,t)}function d(n,t){var r,i,e=M(n,t);p&&o.push([n,t]),h?(u=n,c=t,h=!1,(a=e)&&(v.lineStart(),v.point(n,t))):e&&s?v.point(n,t):!function(n,t){var r=n[0],i=n[1],e=0,o=1,u=t[0]-r,c=t[1]-i,a=E-r;if(u||!(0<a)){if(a/=u,u<0){if(a<e)return;a<o&&(o=a)}else if(0<u){if(o<a)return;e<a&&(e=a)}if(a=S-r,u||!(a<0)){if(a/=u,u<0){if(o<a)return;e<a&&(e=a)}else if(0<u){if(a<e)return;a<o&&(o=a)}if(a=y-i,c||!(0<a)){if(a/=c,c<0){if(a<e)return;a<o&&(o=a)}else if(0<c){if(o<a)return;e<a&&(e=a)}if(a=m-i,c||!(a<0)){if(a/=c,c<0){if(o<a)return;e<a&&(e=a)}else if(0<c){if(a<e)return;a<o&&(o=a)}return 0<e&&(n[0]=r+e*u,n[1]=i+e*c),o<1&&(t[0]=r+o*u,t[1]=i+o*c),1}}}}}(r=[l=Math.max(Rt,Math.min(wt,l)),f=Math.max(Rt,Math.min(wt,f))],i=[n=Math.max(Rt,Math.min(wt,n)),t=Math.max(Rt,Math.min(wt,t))])?e&&(v.lineStart(),v.point(n,t),g=!1):(s||(v.lineStart(),v.point(r[0],r[1])),v.point(i[0],i[1]),e||v.lineEnd(),g=!1),l=n,f=t,s=e}return t}}var Pt,At,jt,qt=t(),zt={sphere:r,point:r,lineStart:function(){zt.point=Lt,zt.lineEnd=bt},lineEnd:r,polygonStart:r,polygonEnd:r};function bt(){zt.point=zt.lineEnd=r}function Lt(n,t){Pt=n*=z,At=O(t*=z),jt=A(t),zt.point=Ot}function Ot(n,t){n*=z;var r=O(t*=z),t=A(t),i=b(n-Pt),e=A(i),i=t*O(i),o=jt*r-At*t*e,e=At*r+jt*t*e;qt.add(L(G(i*i+o*o),e)),Pt=n,At=r,jt=t}function Gt(n){return qt.reset(),a(n,zt),+qt}var Tt=[null,null],kt={type:"LineString",coordinates:Tt};function Ft(n,t){return Tt[0]=n,Tt[1]=t,Gt(kt)}var Ht={Feature:function(n,t){return Wt(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)if(Wt(r[i].geometry,t))return!0;return!1}},It={Sphere:function(){return!0},Point:function(n,t){return Xt(n.coordinates,t)},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)if(Xt(r[i],t))return!0;return!1},LineString:function(n,t){return Yt(n.coordinates,t)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)if(Yt(r[i],t))return!0;return!1},Polygon:function(n,t){return Bt(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)if(Bt(r[i],t))return!0;return!1},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)if(Wt(r[i],t))return!0;return!1}};function Wt(n,t){return!(!n||!It.hasOwnProperty(n.type))&&It[n.type](n,t)}function Xt(n,t){return 0===Ft(n,t)}function Yt(n,t){for(var r,i,e,o=0,u=n.length;o<u;o++){if(0===(i=Ft(n[o],t)))return!0;if(0<o&&0<(e=Ft(n[o],n[o-1]))&&r<=e&&i<=e&&(r+i-e)*(1-Math.pow((r-i)/e,2))<F*e)return!0;r=i}return!1}function Bt(n,t){return!!St(n.map(Dt),Ut(t))}function Dt(n){return(n=n.map(Ut)).pop(),n}function Ut(n){return[n[0]*z,n[1]*z]}function Zt(n,t,r){var i=N.range(n,t-j,r).concat(t);return function(t){return i.map(function(n){return[t,n]})}}function Jt(n,t,r){var i=N.range(n,t-j,r).concat(t);return function(t){return i.map(function(n){return[n,t]})}}function Kt(){var t,r,i,e,o,u,c,a,l,f,p,s,h=10,g=h,v=90,d=360,E=2.5;function y(){return{type:"MultiLineString",coordinates:n()}}function n(){return N.range(W(e/v)*v,i,v).map(p).concat(N.range(W(a/d)*d,c,d).map(s)).concat(N.range(W(r/h)*h,t,h).filter(function(n){return b(n%v)>j}).map(l)).concat(N.range(W(u/g)*g,o,g).filter(function(n){return b(n%d)>j}).map(f))}return y.lines=function(){return n().map(function(n){return{type:"LineString",coordinates:n}})},y.outline=function(){return{type:"Polygon",coordinates:[p(e).concat(s(c).slice(1),p(i).reverse().slice(1),s(a).reverse().slice(1))]}},y.extent=function(n){return arguments.length?y.extentMajor(n).extentMinor(n):y.extentMinor()},y.extentMajor=function(n){return arguments.length?(e=+n[0][0],i=+n[1][0],a=+n[0][1],c=+n[1][1],i<e&&(n=e,e=i,i=n),c<a&&(n=a,a=c,c=n),y.precision(E)):[[e,a],[i,c]]},y.extentMinor=function(n){return arguments.length?(r=+n[0][0],t=+n[1][0],u=+n[0][1],o=+n[1][1],t<r&&(n=r,r=t,t=n),o<u&&(n=u,u=o,o=n),y.precision(E)):[[r,u],[t,o]]},y.step=function(n){return arguments.length?y.stepMajor(n).stepMinor(n):y.stepMinor()},y.stepMajor=function(n){return arguments.length?(v=+n[0],d=+n[1],y):[v,d]},y.stepMinor=function(n){return arguments.length?(h=+n[0],g=+n[1],y):[h,g]},y.precision=function(n){return arguments.length?(E=+n,l=Zt(u,o,90),f=Jt(r,t,E),p=Zt(a,c,90),s=Jt(e,i,E),y):E},y.extentMajor([[-180,-90+j],[180,90-j]]).extentMinor([[-180,-80-j],[180,80+j]])}function Qt(n){return n}var Vt,$t,nr,tr,rr=t(),ir=t(),c={point:r,lineStart:r,lineEnd:r,polygonStart:function(){c.lineStart=er,c.lineEnd=cr},polygonEnd:function(){c.lineStart=c.lineEnd=c.point=r,rr.add(b(ir)),ir.reset()},result:function(){var n=rr/2;return rr.reset(),n}};function er(){c.point=or}function or(n,t){c.point=ur,Vt=nr=n,$t=tr=t}function ur(n,t){ir.add(tr*n-nr*t),nr=n,tr=t}function cr(){ur(Vt,$t)}var ar,lr,o,u,fr=1/0,pr=fr,sr=-fr,hr=sr,gr={point:function(n,t){n<fr&&(fr=n),sr<n&&(sr=n),t<pr&&(pr=t),hr<t&&(hr=t)},lineStart:r,lineEnd:r,polygonStart:r,polygonEnd:r,result:function(){var n=[[fr,pr],[sr,hr]];return sr=hr=-(pr=fr=1/0),n}},vr=0,dr=0,Er=0,yr=0,Sr=0,mr=0,Mr=0,xr=0,_r=0,M={point:Nr,lineStart:wr,lineEnd:Pr,polygonStart:function(){M.lineStart=Ar,M.lineEnd=jr},polygonEnd:function(){M.point=Nr,M.lineStart=wr,M.lineEnd=Pr},result:function(){var n=_r?[Mr/_r,xr/_r]:mr?[yr/mr,Sr/mr]:Er?[vr/Er,dr/Er]:[NaN,NaN];return vr=dr=Er=yr=Sr=mr=Mr=xr=_r=0,n}};function Nr(n,t){vr+=n,dr+=t,++Er}function wr(){M.point=Rr}function Rr(n,t){M.point=Cr,Nr(o=n,u=t)}function Cr(n,t){var r=n-o,i=t-u,r=G(r*r+i*i);yr+=r*(o+n)/2,Sr+=r*(u+t)/2,mr+=r,Nr(o=n,u=t)}function Pr(){M.point=Nr}function Ar(){M.point=qr}function jr(){zr(ar,lr)}function qr(n,t){M.point=zr,Nr(ar=o=n,lr=u=t)}function zr(n,t){var r=n-o,i=t-u,r=G(r*r+i*i);yr+=r*(o+n)/2,Sr+=r*(u+t)/2,mr+=r,Mr+=(r=u*n-o*t)*(o+n),xr+=r*(u+t),_r+=3*r,Nr(o=n,u=t)}function br(n){this._context=n}br.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,P)}},result:r};var Lr,Or,Gr,Tr,kr,Fr=t(),Hr={point:r,lineStart:function(){Hr.point=Ir},lineEnd:function(){Lr&&Wr(Or,Gr),Hr.point=r},polygonStart:function(){Lr=!0},polygonEnd:function(){Lr=null},result:function(){var n=+Fr;return Fr.reset(),n}};function Ir(n,t){Hr.point=Wr,Or=Tr=n,Gr=kr=t}function Wr(n,t){Tr-=n,kr-=t,Fr.add(G(Tr*Tr+kr*kr)),Tr=n,kr=t}function Xr(){this._string=[]}function Yr(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Br(i){return function(n){var t,r=new Dr;for(t in i)r[t]=i[t];return r.stream=n,r}}function Dr(){}function Ur(n,t,r){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),a(r,n.stream(gr)),t(gr.result()),null!=i&&n.clipExtent(i),n}function Zr(e,o,n){return Ur(e,function(n){var t=o[1][0]-o[0][0],r=o[1][1]-o[0][1],i=Math.min(t/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),t=+o[0][0]+(t-i*(n[1][0]+n[0][0]))/2,r=+o[0][1]+(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([t,r])},n)}function Jr(n,t,r){return Zr(n,[[0,0],t],r)}function Kr(i,e,n){return Ur(i,function(n){var t=+e,r=t/(n[1][0]-n[0][0]),t=(t-r*(n[1][0]+n[0][0]))/2,n=-r*n[0][1];i.scale(150*r).translate([t,n])},n)}function Qr(e,o,n){return Ur(e,function(n){var t=+o,r=t/(n[1][1]-n[0][1]),i=-r*n[0][0],t=(t-r*(n[1][1]+n[0][1]))/2;e.scale(150*r).translate([i,t])},n)}Xr.prototype={_radius:4.5,_circle:Yr(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._string.push("M",n,",",t),this._point=1;break;case 1:this._string.push("L",n,",",t);break;default:null==this._circle&&(this._circle=Yr(this._radius)),this._string.push("M",n,",",t,this._circle)}},result:function(){var n;return this._string.length?(n=this._string.join(""),this._string=[],n):null}},Dr.prototype={constructor:Dr,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Vr=16,$r=A(30*z);function ni(n,t){return+t?(C=n,P=t,function(i){var r,e,o,u,c,a,l,f,p,s,h,g,v={point:n,lineStart:t,lineEnd:E,polygonStart:function(){i.polygonStart(),v.lineStart=y},polygonEnd:function(){i.polygonEnd(),v.lineStart=t}};function n(n,t){n=C(n,t),i.point(n[0],n[1])}function t(){f=NaN,v.point=d,i.lineStart()}function d(n,t){var r=hn([n,t]),t=C(n,t);A(f,p,l,s,h,g,f=t[0],p=t[1],l=n,s=r[0],h=r[1],g=r[2],Vr,i),i.point(f,p)}function E(){v.point=n,i.lineEnd()}function y(){t(),v.point=S,v.lineEnd=m}function S(n,t){d(r=n,t),e=f,o=p,u=s,c=h,a=g,v.point=d}function m(){A(f,p,l,s,h,g,e,o,r,u,c,a,Vr,i),v.lineEnd=E,E()}return v}):(r=n,Br({point:function(n,t){n=r(n,t),this.stream.point(n[0],n[1])}}));var r,C,P;function A(n,t,r,i,e,o,u,c,a,l,f,p,s,h){var g,v,d,E,y,S,m,M,x,_,N=u-n,w=c-t,R=N*N+w*w;4*P<R&&s--&&(d=o+p,m=T(d/=E=G((g=i+l)*g+(v=e+f)*v+d*d)),y=b(b(d)-1)<j||b(r-a)<j?(r+a)/2:L(v,g),S=(m=C(y,m))[0],m=m[1],P<(_=w*(M=S-n)-N*(x=m-t))*_/R||.3<b((N*M+w*x)/R-.5)||i*l+e*f+o*p<$r)&&(A(n,t,r,i,e,o,S,m,y,g/=E,v/=E,d,s,h),h.point(S,m),A(S,m,y,g,v,d,u,c,a,l,f,p,s,h))}}var ti=Br({point:function(n,t){this.stream.point(n*z,t*z)}});function ri(r,i,e,o,u){function n(n,t){return[i+r*(n*=o),e-r*(t*=u)]}return n.invert=function(n,t){return[(n-i)/r*o,(e-t)/r*u]},n}function ii(n,r,i,e,o,t){var u=A(t),t=O(t),c=u*n,a=t*n,l=u/n,f=t/n,p=(t*i-u*r)/n,s=(t*r+u*i)/n;function h(n,t){return[c*(n*=e)-a*(t*=o)+r,i-a*n-c*t]}return h.invert=function(n,t){return[e*(l*n-f*t+p),o*(s-f*n-l*t)]},h}function x(n){return ei(function(){return n})()}function ei(n){var t,i,r,e,o,u,c,a,l,f,p=150,s=480,h=250,g=0,v=0,d=0,E=0,y=0,S=0,m=1,M=1,x=null,_=_t,N=null,w=Qt,R=.5;function C(n){return a(n[0]*z,n[1]*z)}function P(n){return(n=a.invert(n[0],n[1]))&&[n[0]*q,n[1]*q]}function A(){var n=ii(p,0,0,m,M,S).apply(null,t(g,v)),n=(S?ii:ri)(p,s-n[0],h-n[1],m,M,S);return i=ot(d,E,y),c=it(t,n),a=it(i,c),u=ni(c,R),j()}function j(){return l=f=null,C}return C.stream=function(n){return l&&f===n?l:l=ti((r=i,Br({point:function(n,t){n=r(n,t);return this.stream.point(n[0],n[1])}})(_(u(w(f=n))))));var r},C.preclip=function(n){return arguments.length?(_=n,x=void 0,j()):_},C.postclip=function(n){return arguments.length?(w=n,N=r=e=o=null,j()):w},C.clipAngle=function(n){return arguments.length?(_=+n?Nt(x=n*z):(x=null,_t),j()):x*q},C.clipExtent=function(n){return arguments.length?(w=null==n?(N=r=e=o=null,Qt):Ct(N=+n[0][0],r=+n[0][1],e=+n[1][0],o=+n[1][1]),j()):null==N?null:[[N,r],[e,o]]},C.scale=function(n){return arguments.length?(p=+n,A()):p},C.translate=function(n){return arguments.length?(s=+n[0],h=+n[1],A()):[s,h]},C.center=function(n){return arguments.length?(g=n[0]%360*z,v=n[1]%360*z,A()):[g*q,v*q]},C.rotate=function(n){return arguments.length?(d=n[0]%360*z,E=n[1]%360*z,y=2<n.length?n[2]%360*z:0,A()):[d*q,E*q,y*q]},C.angle=function(n){return arguments.length?(S=n%360*z,A()):S*q},C.reflectX=function(n){return arguments.length?(m=n?-1:1,A()):m<0},C.reflectY=function(n){return arguments.length?(M=n?-1:1,A()):M<0},C.precision=function(n){return arguments.length?(u=ni(c,R=n*n),j()):G(R)},C.fitExtent=function(n,t){return Zr(C,n,t)},C.fitSize=function(n,t){return Jr(C,n,t)},C.fitWidth=function(n,t){return Kr(C,n,t)},C.fitHeight=function(n,t){return Qr(C,n,t)},function(){return t=n.apply(this,arguments),C.invert=t.invert&&P,A()}}function oi(n){var t=0,r=R/3,i=ei(n),n=i(t,r);return n.parallels=function(n){return arguments.length?i(t=n[0]*z,r=n[1]*z):[t*q,r*q]},n}function ui(n,t){var r,i,e,o=O(n),u=(o+O(t))/2;return b(u)<j?(r=A(n),c.invert=function(n,t){return[n/r,T(t*r)]},c):(e=G(i=1+o*(2*u-o))/u,a.invert=function(n,t){var t=e-t,r=L(n,b(t))*l(t);return t*u<0&&(r-=R*l(n)*l(t)),[r/u,T((i-(n*n+t*t)*u*u)/(2*u))]},a);function c(n,t){return[n*r,O(t)/r]}function a(n,t){t=G(i-2*u*O(t))/u;return[t*O(n*=u),e-t*A(n)]}}function ci(){return oi(ui).scale(155.424).center([0,33.6442])}function ai(){return ci().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function li(e){return function(n,t){var r=A(n),i=A(t),r=e(r*i);return[r*i*O(n),r*O(t)]}}function fi(o){return function(n,t){var r=G(n*n+t*t),i=o(r),e=O(i),i=A(i);return[L(n*e,r*i),T(r&&t*e/r)]}}var pi=li(function(n){return G(2/(1+n))}),si=(pi.invert=fi(function(n){return 2*T(n/2)}),li(function(n){return(n=U(n))&&n/O(n)}));function hi(n,t){return[n,Y(D((C+t)/2))]}function gi(r){var i,e,o,u=x(r),t=u.center,c=u.scale,a=u.translate,l=u.clipExtent,f=null;function p(){var n=R*c(),t=u(lt(u.rotate()).invert([0,0]));return l(null==f?[[t[0]-n,t[1]-n],[t[0]+n,t[1]+n]]:r===hi?[[Math.max(t[0]-n,f),i],[Math.min(t[0]+n,e),o]]:[[f,Math.max(t[1]-n,i)],[e,Math.min(t[1]+n,o)]])}return u.scale=function(n){return(arguments.length?(c(n),p):c)()},u.translate=function(n){return(arguments.length?(a(n),p):a)()},u.center=function(n){return(arguments.length?(t(n),p):t)()},u.clipExtent=function(n){return arguments.length?(null==n?f=i=e=o=null:(f=+n[0][0],i=+n[0][1],e=+n[1][0],o=+n[1][1]),p()):null==f?null:[[f,i],[e,o]]},p()}function vi(n){return D((C+n)/2)}function di(n,t){var r=A(n),e=n===t?O(n):Y(r/A(t))/Y(vi(t)/vi(n)),o=r*B(vi(n),e)/e;return e?(i.invert=function(n,t){var t=o-t,r=l(e)*G(n*n+t*t),i=L(n,b(t))*l(t);return t*e<0&&(i-=R*l(n)*l(t)),[i/e,2*I(B(o/r,1/e))-C]},i):hi;function i(n,t){0<o?t<-C+j&&(t=-C+j):C-j<t&&(t=C-j);t=o/B(vi(t),e);return[t*O(e*n),o-t*A(e*n)]}}function Ei(n,t){return[n,t]}function yi(n,t){var r=A(n),i=n===t?O(n):(r-A(t))/(t-n),e=r/i+n;return b(i)<j?Ei:(o.invert=function(n,t){var t=e-t,r=L(n,b(t))*l(t);return t*i<0&&(r-=R*l(n)*l(t)),[r/i,e-l(i)*G(n*n+t*t)]},o);function o(n,t){t=e-t,n*=i;return[t*O(n),e-t*A(n)]}}si.invert=fi(function(n){return n}),hi.invert=function(n,t){return[n,2*I(X(t))-C]},Ei.invert=Ei;var Si=1.340264,mi=-.081106,Mi=893e-6,xi=.003796,_i=G(3)/2;function Ni(n,t){var t=T(_i*O(t)),r=t*t,i=r*r*r;return[n*A(t)/(_i*(Si+3*mi*r+i*(7*Mi+9*xi*r))),t*(Si+mi*r+i*(Mi+xi*r))]}function wi(n,t){var r=A(t),i=A(n)*r;return[r*O(n)/i,O(t)/i]}function Ri(n,t){var r=t*t,i=r*r;return[n*(.8707-.131979*r+i*(i*(.003971*r-.001529*i)-.013791)),t*(1.007226+r*(.015085+i*(.028874*r-.044475-.005916*i)))]}function Ci(n,t){return[A(t)*O(n),O(t)]}function Pi(n,t){var r=A(t),i=1+A(n)*r;return[r*O(n)/i,O(t)/i]}function Ai(n,t){return[Y(D((C+t)/2)),-n]}Ni.invert=function(n,t){for(var r,i=t,e=i*i,o=e*e*e,u=0;u<12&&(o=(e=(i-=r=(i*(Si+mi*e+o*(Mi+xi*e))-t)/(Si+3*mi*e+o*(7*Mi+9*xi*e)))*i)*e*e,!(b(r)<F));++u);return[_i*n*(Si+3*mi*e+o*(7*Mi+9*xi*e))/A(i),T(O(i)/_i)]},wi.invert=fi(I),Ri.invert=function(n,t){var r=t,i=25;do{var e=r*r,o=e*e}while(r-=o=(r*(1.007226+e*(.015085+o*(.028874*e-.044475-.005916*o)))-t)/(1.007226+e*(.045255+o*(.259866*e-.311325-.005916*11*o))),b(o)>j&&0<--i);return[n/(.8707+(e=r*r)*(e*(e*e*e*(.003971-.001529*e)-.013791)-.131979)),r]},Ci.invert=fi(T),Pi.invert=fi(function(n){return 2*I(n)}),Ai.invert=function(n,t){return[-t,2*I(X(n))-C]},n.geoAlbers=ai,n.geoAlbersUsa=function(){var t,r,e,o,u,i,c=ai(),a=ci().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=ci().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(n,t){i=[n,t]}};function p(n){var t=n[0],n=n[1];return i=null,e.point(t,n),i||(o.point(t,n),i)||(u.point(t,n),i)}function s(){return t=r=null,p}return p.invert=function(n){var t=c.scale(),r=c.translate(),i=(n[0]-r[0])/t,r=(n[1]-r[1])/t;return(.12<=r&&r<.234&&-.425<=i&&i<-.214?a:.166<=r&&r<.234&&-.214<=i&&i<-.115?l:c).invert(n)},p.stream=function(n){return t&&r===n?t:(i=[c.stream(r=n),a.stream(n),l.stream(n)],e=i.length,t={point:function(n,t){for(var r=-1;++r<e;)i[r].point(n,t)},sphere:function(){for(var n=-1;++n<e;)i[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)i[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)i[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)i[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)i[n].polygonEnd()}});var i,e},p.precision=function(n){return arguments.length?(c.precision(n),a.precision(n),l.precision(n),s()):c.precision()},p.scale=function(n){return arguments.length?(c.scale(n),a.scale(.35*n),l.scale(n),p.translate(c.translate())):c.scale()},p.translate=function(n){var t,r,i;return arguments.length?(t=c.scale(),r=+n[0],i=+n[1],e=c.translate(n).clipExtent([[r-.455*t,i-.238*t],[r+.455*t,i+.238*t]]).stream(f),o=a.translate([r-.307*t,i+.201*t]).clipExtent([[r-.425*t+j,i+.12*t+j],[r-.214*t-j,i+.234*t-j]]).stream(f),u=l.translate([r-.205*t,i+.212*t]).clipExtent([[r-.214*t+j,i+.166*t+j],[r-.115*t-j,i+.234*t-j]]).stream(f),s()):c.translate()},p.fitExtent=function(n,t){return Zr(p,n,t)},p.fitSize=function(n,t){return Jr(p,n,t)},p.fitWidth=function(n,t){return Kr(p,n,t)},p.fitHeight=function(n,t){return Qr(p,n,t)},p.scale(1070)},n.geoArea=function(n){return cn.reset(),a(n,i),2*cn},n.geoAzimuthalEqualArea=function(){return x(pi).scale(124.75).clipAngle(179.999)},n.geoAzimuthalEqualAreaRaw=pi,n.geoAzimuthalEquidistant=function(){return x(si).scale(79.4188).clipAngle(179.999)},n.geoAzimuthalEquidistantRaw=si,n.geoBounds=function(n){var t,r,i,e,o,u,c;if(h=s=-(f=p=1/0),g=[],a(n,S),r=g.length){for(g.sort(Yn),t=1,o=[i=g[0]];t<r;++t)Bn(i,(e=g[t])[0])||Bn(i,e[1])?(m(i[0],e[1])>m(i[0],i[1])&&(i[1]=e[1]),m(e[0],i[1])>m(i[0],i[1])&&(i[0]=e[0])):o.push(i=e);for(u=-1/0,t=0,i=o[r=o.length-1];t<=r;i=e,++t)(c=m(i[1],(e=o[t])[0]))>u&&(u=c,f=e[0],s=i[1])}return g=v=null,f===1/0||p===1/0?[[NaN,NaN],[NaN,NaN]]:[[f,p],[s,h]]},n.geoCentroid=function(n){_n=Nn=wn=Rn=Cn=Pn=An=jn=qn=zn=bn=0,a(n,e);var n=qn,t=zn,r=bn,i=n*n+t*t+r*r;return i<F&&(n=Pn,t=An,r=jn,Nn<j&&(n=wn,t=Rn,r=Cn),(i=n*n+t*t+r*r)<F)?[NaN,NaN]:[L(t,n)*q,T(r/G(i))*q]},n.geoCircle=function(){var i,e,o=rt([0,0]),u=rt(90),c=rt(6),a={point:function(n,t){i.push(n=e(n,t)),n[0]*=q,n[1]*=q}};function t(){var n=o.apply(this,arguments),t=u.apply(this,arguments)*z,r=c.apply(this,arguments)*z;return i=[],e=ot(-n[0]*z,-n[1]*z,0).invert,ft(a,t,r,1),n={type:"Polygon",coordinates:[i]},i=e=null,n}return t.center=function(n){return arguments.length?(o="function"==typeof n?n:rt([+n[0],+n[1]]),t):o},t.radius=function(n){return arguments.length?(u="function"==typeof n?n:rt(+n),t):u},t.precision=function(n){return arguments.length?(c="function"==typeof n?n:rt(+n),t):c},t},n.geoClipAntimeridian=_t,n.geoClipCircle=Nt,n.geoClipExtent=function(){var t,r,i,e=0,o=0,u=960,c=500;return i={stream:function(n){return t&&r===n?t:t=Ct(e,o,u,c)(r=n)},extent:function(n){return arguments.length?(e=+n[0][0],o=+n[0][1],u=+n[1][0],c=+n[1][1],t=r=null,i):[[e,o],[u,c]]}}},n.geoClipRectangle=Ct,n.geoConicConformal=function(){return oi(di).scale(109.5).parallels([30,30])},n.geoConicConformalRaw=di,n.geoConicEqualArea=ci,n.geoConicEqualAreaRaw=ui,n.geoConicEquidistant=function(){return oi(yi).scale(131.154).center([0,13.9389])},n.geoConicEquidistantRaw=yi,n.geoContains=function(n,t){return(n&&Ht.hasOwnProperty(n.type)?Ht[n.type]:Wt)(n,t)},n.geoDistance=Ft,n.geoEqualEarth=function(){return x(Ni).scale(177.158)},n.geoEqualEarthRaw=Ni,n.geoEquirectangular=function(){return x(Ei).scale(152.63)},n.geoEquirectangularRaw=Ei,n.geoGnomonic=function(){return x(wi).scale(144.049).clipAngle(60)},n.geoGnomonicRaw=wi,n.geoGraticule=Kt,n.geoGraticule10=function(){return Kt()()},n.geoIdentity=function(){var i,e,t,r,o,u,c,a=1,l=0,f=0,p=1,s=1,h=0,g=null,v=1,d=1,E=Br({point:function(n,t){n=m([n,t]);this.stream.point(n[0],n[1])}}),y=Qt;function S(){return v=a*p,d=a*s,u=c=null,m}function m(n){var t,r=n[0]*v,n=n[1]*d;return h&&(t=n*i-r*e,r=r*i+n*e,n=t),[r+l,n+f]}return m.invert=function(n){var t,r=n[0]-l,n=n[1]-f;return h&&(t=n*i+r*e,r=r*i-n*e,n=t),[r/v,n/d]},m.stream=function(n){return u&&c===n?u:u=E(y(c=n))},m.postclip=function(n){return arguments.length?(y=n,g=t=r=o=null,S()):y},m.clipExtent=function(n){return arguments.length?(y=null==n?(g=t=r=o=null,Qt):Ct(g=+n[0][0],t=+n[0][1],r=+n[1][0],o=+n[1][1]),S()):null==g?null:[[g,t],[r,o]]},m.scale=function(n){return arguments.length?(a=+n,S()):a},m.translate=function(n){return arguments.length?(l=+n[0],f=+n[1],S()):[l,f]},m.angle=function(n){return arguments.length?(e=O(h=n%360*z),i=A(h),S()):h*q},m.reflectX=function(n){return arguments.length?(p=n?-1:1,S()):p<0},m.reflectY=function(n){return arguments.length?(s=n?-1:1,S()):s<0},m.fitExtent=function(n,t){return Zr(m,n,t)},m.fitSize=function(n,t){return Jr(m,n,t)},m.fitWidth=function(n,t){return Kr(m,n,t)},m.fitHeight=function(n,t){return Qr(m,n,t)},m},n.geoInterpolate=function(n,t){var r=n[0]*z,i=n[1]*z,n=t[0]*z,t=t[1]*z,e=A(i),o=O(i),u=A(t),c=O(t),a=e*A(r),l=e*O(r),f=u*A(n),p=u*O(n),s=2*T(G(Z(t-i)+e*u*Z(n-r))),h=O(s),t=s?function(n){var t=O(n*=s)/h,n=O(s-n)/h,r=n*a+t*f,i=n*l+t*p,n=n*o+t*c;return[L(i,r)*q,L(n,G(r*r+i*i))*q]}:function(){return[r*q,i*q]};return t.distance=s,t},n.geoLength=Gt,n.geoMercator=function(){return gi(hi).scale(961/P)},n.geoMercatorRaw=hi,n.geoNaturalEarth1=function(){return x(Ri).scale(175.295)},n.geoNaturalEarth1Raw=Ri,n.geoOrthographic=function(){return x(Ci).scale(249.5).clipAngle(90+j)},n.geoOrthographicRaw=Ci,n.geoPath=function(t,r){var i,e,o=4.5;function u(n){return n&&("function"==typeof o&&e.pointRadius(+o.apply(this,arguments)),a(n,i(e))),e.result()}return u.area=function(n){return a(n,i(c)),c.result()},u.measure=function(n){return a(n,i(Hr)),Hr.result()},u.bounds=function(n){return a(n,i(gr)),gr.result()},u.centroid=function(n){return a(n,i(M)),M.result()},u.projection=function(n){return arguments.length?(i=null==n?(t=null,Qt):(t=n).stream,u):t},u.context=function(n){return arguments.length?(e=null==n?(r=null,new Xr):new br(r=n),"function"!=typeof o&&e.pointRadius(o),u):r},u.pointRadius=function(n){return arguments.length?(o="function"==typeof n?n:(e.pointRadius(+n),+n),u):o},u.projection(t).context(r)},n.geoProjection=x,n.geoProjectionMutator=ei,n.geoRotation=lt,n.geoStereographic=function(){return x(Pi).scale(250).clipAngle(142)},n.geoStereographicRaw=Pi,n.geoStream=a,n.geoTransform=function(n){return{stream:Br(n)}},n.geoTransverseMercator=function(){var n=gi(Ai),t=n.center,r=n.rotate;return n.center=function(n){return arguments.length?t([-n[1],n[0]]):[(n=t())[1],-n[0]]},n.rotate=function(n){return arguments.length?r([n[0],n[1],2<n.length?n[2]+90:90]):[(n=r())[0],n[1],n[2]-90]},r([0,0,90]).scale(159.155)},n.geoTransverseMercatorRaw=Ai,Object.defineProperty(n,"__esModule",{value:!0})});
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).d3=t.d3||{})}(this,function(o){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function u(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),i.hasOwnProperty(n)?{space:i[n],local:t}:t}function c(t){t=u(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}})(t)}function n(){}function f(t){return null==t?n:function(){return this.querySelector(t)}}function e(){return[]}function l(t){return null==t?e:function(){return this.querySelectorAll(t)}}function h(t){return function(){return this.matches(t)}}function t(t){return new Array(t.length)}function _(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}_.prototype={constructor:_,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function x(t,n,e,r,i,o){for(var u,c=0,s=n.length,a=o.length;c<a;++c)(u=n[c])?(u.__data__=o[c],r[c]=u):e[c]=new _(t,o[c]);for(;c<s;++c)(u=n[c])&&(i[c]=u)}function S(t,n,e,r,i,o,u){for(var c,s,a={},l=n.length,f=o.length,h=new Array(l),p=0;p<l;++p)(c=n[p])&&(h[p]=s="$"+u.call(c,c.__data__,p,n),s in a?i[p]=c:a[s]=c);for(p=0;p<f;++p)(c=a[s="$"+u.call(t,o[p],p,o)])?((r[p]=c).__data__=o[p],a[s]=null):e[p]=new _(t,o[p]);for(p=0;p<l;++p)(c=n[p])&&a[h[p]]===c&&(i[p]=c)}function p(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function s(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function a(t,n){return t.style.getPropertyValue(n)||s(t).getComputedStyle(t,null).getPropertyValue(n)}function d(t){return t.trim().split(/^|\s+/)}function v(t){return t.classList||new y(t)}function y(t){this._node=t,this._names=d(t.getAttribute("class")||"")}function m(t,n){for(var e=v(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function g(t,n){for(var e=v(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function w(){this.textContent=""}function A(){this.innerHTML=""}function b(){this.nextSibling&&this.parentNode.appendChild(this)}function V(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j(){return null}function R(){var t=this.parentNode;t&&t.removeChild(this)}function H(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function I(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}y.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var E={};function U(e,t,n){return e=N(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function N(e,r,i){return function(t){var n=o.event;o.event=t;try{e.call(this,this.__data__,r,i)}finally{o.event=n}}}function z(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function G(s,a,l){var f=E.hasOwnProperty(s.type)?U:N;return function(t,n,e){var r,i=this.__on,o=f(a,n,e);if(i)for(var u=0,c=i.length;u<c;++u)if((r=i[u]).type===s.type&&r.name===s.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=l),void(r.value=a);this.addEventListener(s.type,o,l),r={type:s.type,name:s.name,value:a,listener:o,capture:l},i?i.push(r):this.__on=[r]}}function P(t,n,e){var r=s(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}o.event=null,"undefined"==typeof document||"onmouseenter"in document.documentElement||(E={mouseenter:"mouseover",mouseleave:"mouseout"});var C=[null];function L(t,n){this._groups=t,this._parents=n}function T(){return new L([[document.documentElement]],C)}function B(t){return"string"==typeof t?new L([[document.querySelector(t)]],[document.documentElement]):new L([[t]],C)}L.prototype=T.prototype={constructor:L,select:function(t){"function"!=typeof t&&(t=f(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,c=n[i],s=c.length,a=r[i]=new Array(s),l=0;l<s;++l)(o=c[l])&&(u=t.call(o,o.__data__,l,c))&&("__data__"in o&&(u.__data__=o.__data__),a[l]=u);return new L(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=l(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,c=n[o],s=c.length,a=0;a<s;++a)(u=c[a])&&(r.push(t.call(u,u.__data__,a,c)),i.push(u));return new L(r,i)},filter:function(t){"function"!=typeof t&&(t=h(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],c=u.length,s=r[i]=[],a=0;a<c;++a)(o=u[a])&&t.call(o,o.__data__,a,u)&&s.push(o);return new L(r,this._parents)},data:function(t,n){if(!t)return _=new Array(this.size()),l=-1,this.each(function(t){_[++l]=t}),_;var e,r=n?S:x,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,c=new Array(u),s=new Array(u),a=new Array(u),l=0;l<u;++l){var f=i[l],h=o[l],p=h.length,_=t.call(f,f&&f.__data__,l,i),d=_.length,v=s[l]=new Array(d),y=c[l]=new Array(d);r(f,h,v,y,a[l]=new Array(p),_,n);for(var m,g,w=0,A=0;w<d;++w)if(m=v[w]){for(A<=w&&(A=w+1);!(g=y[A])&&++A<d;);m._next=g||null}}return(c=new L(c,i))._enter=s,c._exit=a,c},enter:function(){return new L(this._enter||this._groups.map(t),this._parents)},exit:function(){return new L(this._exit||this._groups.map(t),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?t(r):r.append(t+"");return null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,t=e.length,i=Math.min(r,t),o=new Array(r),u=0;u<i;++u)for(var c,s=n[u],a=e[u],l=s.length,f=o[u]=new Array(l),h=0;h<l;++h)(c=s[h]||a[h])&&(f[h]=c);for(;u<r;++u)o[u]=n[u];return new L(o,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];0<=--o;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e=e||p;for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,c=n[o],s=c.length,a=i[o]=new Array(s),l=0;l<s;++l)(u=c[l])&&(a[l]=u);a.sort(t)}return new L(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,c=o.length;u<c;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e,t=u(t);return arguments.length<2?(e=this.node(),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)):this.each((null==n?t.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?t.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:t.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(t,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):a(this.node(),t)},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=d(t+"");if(arguments.length<2){for(var r=v(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?m:g)(this,t)}}:n?function(t){return function(){m(this,t)}}:function(t){return function(){g(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?w:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?A:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(b)},lower:function(){return this.each(V)},append:function(t){var n="function"==typeof t?t:c(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:c(t),r=null==n?j:"function"==typeof n?n:f(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(R)},clone:function(t){return this.select(t?I:H)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),u=o.length;if(!(arguments.length<2)){for(c=n?G:z,null==e&&(e=!1),r=0;r<u;++r)this.each(c(o[r],n,e));return this}var c=this.node().__on;if(c)for(var s,a=0,l=c.length;a<l;++a)for(r=0,s=c[a];r<u;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return P(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return P(this,t,n)}})(t,n))}};var X=0;function q(){return new D}function D(){this._="@"+(++X).toString(36)}function M(){for(var t,n=o.event;t=n.sourceEvent;)n=t;return n}function O(t,n){var e=t.ownerSVGElement||t;return e.createSVGPoint?((e=e.createSVGPoint()).x=n.clientX,e.y=n.clientY,[(e=e.matrixTransform(t.getScreenCTM().inverse())).x,e.y]):(e=t.getBoundingClientRect(),[n.clientX-e.left-t.clientLeft,n.clientY-e.top-t.clientTop])}D.prototype=q.prototype={constructor:D,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},o.clientPoint=O,o.create=function(t){return B(c(t).call(document.documentElement))},o.creator=c,o.customEvent=function(t,n,e,r){var i=o.event;t.sourceEvent=o.event,o.event=t;try{return n.apply(e,r)}finally{o.event=i}},o.local=q,o.matcher=h,o.mouse=function(t){var n=M();return O(t,n=n.changedTouches?n.changedTouches[0]:n)},o.namespace=u,o.namespaces=i,o.select=B,o.selectAll=function(t){return"string"==typeof t?new L([document.querySelectorAll(t)],[document.documentElement]):new L([null==t?[]:t],C)},o.selection=T,o.selector=f,o.selectorAll=l,o.style=a,o.touch=function(t,n,e){arguments.length<3&&(e=n,n=M().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return O(t,r);return null},o.touches=function(t,n){for(var e=0,r=(n=null==n?M().touches:n)?n.length:0,i=new Array(r);e<r;++e)i[e]=O(t,n[e]);return i},o.window=s,Object.defineProperty(o,"__esModule",{value:!0})});
!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(r.topojson=r.topojson||{})}(this,function(r){"use strict";function t(r,n){var t=n.id,e=n.bbox,o=null==n.properties?{}:n.properties,r=s(r,n);return null==t&&null==e?{type:"Feature",properties:o,geometry:r}:null==e?{type:"Feature",id:t,properties:o,geometry:r}:{type:"Feature",id:t,bbox:e,properties:o,geometry:r}}function s(r,n){function o(r){return f(r)}function a(r){for(var n=[],t=0,e=r.length;t<e;++t){o=void 0;a=void 0;i=void 0;u=void 0;c=void 0;var o=r[t];var a=n;a.length&&a.pop();for(var i=s[o<0?~o:o],u=0,c=i.length;u<c;++u)a.push(f(i[u],u));o<0&&q(a,c)}return n.length<2&&n.push(n[0]),n}function t(r){for(var n=a(r);n.length<4;)n.push(n[0]);return n}function i(r){return r.map(t)}var f=v(r.transform),s=r.arcs;return function r(n){var t,e=n.type;switch(e){case"GeometryCollection":return{type:e,geometries:n.geometries.map(r)};case"Point":t=o(n.coordinates);break;case"MultiPoint":t=n.coordinates.map(o);break;case"LineString":t=a(n.arcs);break;case"MultiLineString":t=n.arcs.map(a);break;case"Polygon":t=i(n.arcs);break;case"MultiPolygon":t=n.arcs.map(i);break;default:return null}return{type:e,coordinates:t}}(n)}function n(r,n,t){var e,o,a,i,u,c,f;if(1<arguments.length)i=t,c=[],f=[],function r(n){switch((u=n).type){case"GeometryCollection":n.geometries.forEach(r);break;case"LineString":l(n.arcs);break;case"MultiLineString":case"Polygon":h(n.arcs);break;case"MultiPolygon":n.arcs.forEach(h)}}(n),f.forEach(null==i?function(r){c.push(r[0].i)}:function(r){i(r[0].g,r[r.length-1].g)&&c.push(r[0].i)}),e=c;else for(o=0,e=new Array(a=r.arcs.length);o<a;++o)e[o]=o;function s(r){var n=r<0?~r:r;(f[n]||(f[n]=[])).push({i:r,g:u})}function l(r){r.forEach(s)}function h(r){r.forEach(l)}return{type:"MultiLineString",arcs:m(r,e)}}function e(u,r){function t(n){n.forEach(function(r){r.forEach(function(r){(f[r=r<0?~r:r]||(f[r]=[])).push(n)})}),e.push(n)}function c(r){for(var n,t=s(u,{type:"Polygon",arcs:[r]}).coordinates[0],e=-1,o=t.length,a=t[o-1],i=0;++e<o;)n=a,a=t[e],i+=n[0]*a[1]-n[1]*a[0];return Math.abs(i)}var f={},e=[],o=[];return r.forEach(function r(n){switch(n.type){case"GeometryCollection":n.geometries.forEach(r);break;case"Polygon":t(n.arcs);break;case"MultiPolygon":n.arcs.forEach(t)}}),e.forEach(function(r){if(!r._){var n=[],t=[r];for(r._=1,o.push(n);r=t.pop();)n.push(r),r.forEach(function(r){r.forEach(function(r){f[r<0?~r:r].forEach(function(r){r._||(r._=1,t.push(r))})})})}}),e.forEach(function(r){delete r._}),{type:"MultiPolygon",arcs:o.map(function(r){var n,t=[];if(r.forEach(function(r){r.forEach(function(r){r.forEach(function(r){f[r<0?~r:r].length<2&&t.push(r)})})}),1<(n=(t=m(u,t)).length))for(var e,o,a=1,i=c(t[0]);a<n;++a)(e=c(t[a]))>i&&(o=t[0],t[0]=t[a],t[a]=o,i=e);return t})}}function M(r,n,t){for(var e,o=n+(t---n>>1);n<o;++n,--t)e=r[n],r[n]=r[t],r[t]=e}function l(r){return null==r?{type:null}:("FeatureCollection"===r.type?function(r){var n={type:"GeometryCollection",geometries:r.features.map(o)};return null!=r.bbox&&(n.bbox=r.bbox),n}:"Feature"===r.type?o:a)(r)}function o(r){var n,t=a(r.geometry);for(n in null!=r.id&&(t.id=r.id),null!=r.bbox&&(t.bbox=r.bbox),r.properties){t.properties=r.properties;break}return t}function a(r){var n;return null==r?{type:null}:(n="GeometryCollection"===r.type?{type:"GeometryCollection",geometries:r.geometries.map(a)}:"Point"===r.type||"MultiPoint"===r.type?{type:r.type,coordinates:r.coordinates}:{type:r.type,arcs:r.coordinates},null!=r.bbox&&(n.bbox=r.bbox),n)}function h(r){var n,t=r[0],r=r[1];return r<t&&(n=t,t=r,r=n),t+31*r}function p(r,n){var t,e=r[0],r=r[1],o=n[0],n=n[1];return r<e&&(t=e,e=r,r=t),n<o&&(t=o,o=n,n=t),e===o&&r===n}function A(){return!0}function L(r){return r}function C(r){return null!=r.type}function g(r){var n=r[0],t=r[1],r=r[2];return Math.abs((n[0]-r[0])*(t[1]-n[1])-(n[0]-t[0])*(r[1]-n[1]))/2}function i(r){for(var n,t=-1,e=r.length,o=r[e-1],a=0;++t<e;)n=o,o=r[t],a+=n[0]*o[1]-n[1]*o[0];return Math.abs(a)/2}function y(r,n){return r[1][2]-n[1][2]}function N(r){return[r[0],r[1],0]}function O(r,n){return n-r}function u(r,n){for(var t=0,e=r.length,o=0,a=r[n?t++:e-1],i=a[0]*I,u=a[1]*I/2+_,c=T(u),f=F(u);t<e;++t){var s=i,i=(a=r[t])[0]*I,u=a[1]*I/2+_,l=c,c=T(u),s=i-s,h=0<=s?1:-1,s=h*s,p=f*(f=F(u)),l=l*c+p*T(s),p=p*h*F(s);o+=B(p,l)}return o}function v(r){var a,i,u,c,f,s;return null==r?x:(u=r.scale[0],c=r.scale[1],f=r.translate[0],s=r.translate[1],function(r,n){n||(a=i=0);var t=2,e=r.length,o=new Array(e);for(o[0]=(a+=r[0])*u+f,o[1]=(i+=r[1])*c+s;t<e;)o[t]=r[t],++t;return o})}function b(r){function n(r){(r=o(r))[0]<a&&(a=r[0]),r[0]>u&&(u=r[0]),r[1]<i&&(i=r[1]),r[1]>c&&(c=r[1])}function t(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(t);break;case"Point":n(r.coordinates);break;case"MultiPoint":r.coordinates.forEach(n)}}var e,o=v(r.transform),a=1/0,i=a,u=-a,c=-a;for(e in r.arcs.forEach(function(r){for(var n,t=-1,e=r.length;++t<e;)(n=o(r[t],t))[0]<a&&(a=n[0]),n[0]>u&&(u=n[0]),n[1]<i&&(i=n[1]),n[1]>c&&(c=n[1])}),r.objects)t(r.objects[e]);return[a,i,u,c]}function q(r,n){for(var t,e=r.length,o=e-n;o<--e;)t=r[o],r[o++]=r[e],r[e]=t}function c(n,r){return"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map(function(r){return t(n,r)})}:t(n,r)}function m(u,e){function r(r,n){for(var t in r){t=r[t];delete n[t.start],delete t.start,delete t.end,t.forEach(function(r){o[r<0?~r:r]=1}),a.push(t)}}var o={},c={},f={},a=[],i=-1;return e.forEach(function(r,n){var t=u.arcs[r<0?~r:r];t.length<3&&!t[1][0]&&!t[1][1]&&(t=e[++i],e[i]=r,e[n]=t)}),e.forEach(function(r){a=r,o=u.arcs[a<0?~a:a],i=o[0],u.transform?(t=[0,0],o.forEach(function(r){t[0]+=r[0],t[1]+=r[1]})):t=o[o.length-1];var n,t,e,o=a<0?[t,i]:[i,t],a=o[0],i=o[1];(o=f[a])?(delete f[o.end],o.push(r),o.end=i,(n=c[i])?(delete c[n.start],e=n===o?o:o.concat(n),c[e.start=o.start]=f[e.end=n.end]=e):c[o.start]=f[o.end]=o):(o=c[i])?(delete c[o.start],o.unshift(r),o.start=a,(n=f[a])?(delete f[n.end],e=n===o?o:n.concat(o),c[e.start=n.start]=f[e.end=o.end]=e):c[o.start]=f[o.end]=o):c[(o=[r]).start=a]=f[o.end=i]=o}),r(f,c),r(c,f),e.forEach(function(r){o[r<0?~r:r]||a.push([r])}),a}function d(r,n){for(var t=0,e=r.length;t<e;){var o=t+e>>>1;r[o]<n?t=1+o:e=o}return t}function E(r){var i,u,c,f,s,l;return null==r?x:(c=r.scale[0],f=r.scale[1],s=r.translate[0],l=r.translate[1],function(r,n){n||(i=u=0);var t=2,e=r.length,o=new Array(e),n=Math.round((r[0]-s)/c),a=Math.round((r[1]-l)/f);for(o[0]=n-i,i=n,o[1]=a-u,u=a;t<e;)o[t]=r[t],++t;return o})}function U(r){for(var n,t,e,o,a,i=function(r){function n(r,n,t,e){var o;c[t]!==r&&(c[t]=r,0<=(r=f[t])?(o=s[t],r===n&&o===e||r===e&&o===n||(++h,l[t]=1)):(f[t]=n,s[t]=e))}function o(r){return j(i[r])}function a(r,n){return S(i[r],i[n])}for(var i=r.coordinates,t=r.lines,e=r.rings,u=function(){for(var r=k(1.4*i.length,o,a,Int32Array,-1,Int32Array),n=new Int32Array(i.length),t=0,e=i.length;t<e;++t)n[t]=r.maybeSet(t,t);return n}(),c=new Int32Array(i.length),f=new Int32Array(i.length),s=new Int32Array(i.length),l=new Int8Array(i.length),h=0,p=0,g=i.length;p<g;++p)c[p]=f[p]=s[p]=-1;for(p=0,g=t.length;p<g;++p){var y=t[p],v=y[0],b=y[1],m=u[v],d=u[++v];for(++h,l[m]=1;++v<=b;)n(p,m,m=d,d=u[v]);++h,l[d]=1}for(p=0,g=i.length;p<g;++p)c[p]=-1;for(p=0,g=e.length;p<g;++p){var M=e[p],E=M[0]+1,P=M[1];for(n(p,u[P-1],m=u[E-1],d=u[E]);++E<=P;)n(p,m,m=d,d=u[E])}var x,c=f=s=null,w=R(1.4*h,j,S);for(p=0,g=i.length;p<g;++p)l[x=u[p]]&&w.add(i[x]);return w}(r),u=r.coordinates,c=r.lines,f=r.rings,s=0,l=c.length;s<l;++s)for(var h=c[s],p=h[0],g=h[1];++p<g;)i.has(u[p])&&(n={0:p,1:h[1]},h[1]=p,h=h.next=n);for(s=0,l=f.length;s<l;++s)for(var y=f[s],v=y[0],b=v,m=y[1],d=i.has(u[v]);++b<m;)i.has(u[b])&&(d?(n={0:b,1:y[1]},y[1]=b,y=y.next=n):(a=(o=m)-b,M(t=u,e=v,o),M(t,e,e+a),M(t,e+a,o),u[m]=u[v],d=!0,b=v));return r}function z(r){function n(r){var n,t,e,o,a,i,u,c;if(e=f.get(n=l[r[0]]))for(u=0,c=e.length;u<c;++u)if(function(r,n){var t=r[0],e=n[0],o=r[1];if(t-o!=e-n[1])return;for(;t<=o;++t,++e)if(!S(l[t],l[e]))return;return 1}(o=e[u],r))return r[0]=o[0],r[1]=o[1];if(a=f.get(t=l[r[1]]))for(u=0,c=a.length;u<c;++u)if(function(r,n){var t=r[0],e=n[0],o=r[1],a=n[1];if(t-o!=e-a)return;for(;t<=o;++t,--a)if(!S(l[t],l[a]))return;return 1}(i=a[u],r))return r[1]=i[0],r[0]=i[1];e?e.push(r):f.set(n,[r]),a?a.push(r):f.set(t,[r]),h.push(r)}function i(r,n){var t=r[0],e=n[0],o=r[1]-t;if(o==n[1]-e){for(var a=s(r),i=s(n),u=0;u<o;++u)if(!S(l[t+(u+a)%o],l[e+(u+i)%o]))return;return 1}}function u(r,n){var t=r[0],e=n[0],o=r[1],a=n[1],i=o-t;if(i==a-e){for(var u=s(r),c=i-s(n),f=0;f<i;++f)if(!S(l[t+(f+u)%i],l[a-(f+c)%i]))return;return 1}}function s(r){for(var n=r[0],t=r[1],e=n,o=e,a=l[e];++e<t;){var i=l[e];(i[0]<a[0]||i[0]===a[0]&&i[1]<a[1])&&(o=e,a=i)}return o-n}var t,e,l=r.coordinates,o=r.lines,a=r.rings,c=o.length+a.length;for(delete r.lines,delete r.rings,p=0,g=o.length;p<g;++p)for(t=o[p];t=t.next;)++c;for(p=0,g=a.length;p<g;++p)for(e=a[p];e=e.next;)++c;for(var f=k(2*c*1.4,j,S),h=r.arcs=[],p=0,g=o.length;p<g;++p)for(t=o[p];n(t),t=t.next;);for(p=0,g=a.length;p<g;++p)if((e=a[p]).next)for(;n(e),e=e.next;);else!function(r){var n,t,e,o,a;if(t=f.get(l[r[0]]))for(o=0,a=t.length;o<a;++o){if(i(e=t[o],r))return r[0]=e[0],r[1]=e[1];if(u(e,r))return r[0]=e[1],r[1]=e[0]}if(t=f.get(n=l[r[0]+s(r)]))for(o=0,a=t.length;o<a;++o){if(i(e=t[o],r))return r[0]=e[0],r[1]=e[1];if(u(e,r))return r[0]=e[1],r[1]=e[0]}t?t.push(r):f.set(n,[r]),h.push(r)}(e);return r}function f(r){function n(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(n);break;case"Polygon":t(r.arcs);break;case"MultiPolygon":r.arcs.forEach(t)}}function t(r){for(var n=0,t=r.length;n<t;++n,++f)for(var e=r[n],o=0,a=e.length;o<a;++o){var i=e[o],u=c[i=i<0?~i:i];null==u?c[i]=f:u!==f&&(c[i]=-1)}}var e,c=new Array(r.arcs.length),f=0;for(e in r.objects)n(r.objects[e]);return function(r){for(var n,t=0,e=r.length;t<e;++t)if(-1===c[(n=r[t])<0?~n:n])return!0;return!1}}function P(t,e,o){return e=null==e?Number.MIN_VALUE:+e,null==o&&(o=i),function(r,n){return o(c(t,{type:"Polygon",arcs:[r]}).geometry.coordinates[0],n)>=e}}var x=function(r){return r},R=function(o,a,i,r,u){3===arguments.length&&(r=Array,u=null);for(var c=new r(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),f=o-1,n=0;n<o;++n)c[n]=u;return{add:function(r){for(var n=a(r)&f,t=c[n],e=0;t!=u;){if(i(t,r))return!0;if(++e>=o)throw new Error("full hashset");t=c[n=n+1&f]}return c[n]=r,!0},has:function(r){for(var n=a(r)&f,t=c[n],e=0;t!=u;){if(i(t,r))return!0;if(++e>=o)break;t=c[n=n+1&f]}return!1},values:function(){for(var r=[],n=0,t=c.length;n<t;++n){var e=c[n];e!=u&&r.push(e)}return r}}},k=function(a,i,u,r,c,n){3===arguments.length&&(r=n=Array,c=null);for(var f=new r(a=1<<Math.max(4,Math.ceil(Math.log(a)/Math.LN2))),s=new n(a),l=a-1,t=0;t<a;++t)f[t]=c;return{set:function(r,n){for(var t=i(r)&l,e=f[t],o=0;e!=c;){if(u(e,r))return s[t]=n;if(++o>=a)throw new Error("full hashmap");e=f[t=t+1&l]}return f[t]=r,s[t]=n},maybeSet:function(r,n){for(var t=i(r)&l,e=f[t],o=0;e!=c;){if(u(e,r))return s[t];if(++o>=a)throw new Error("full hashmap");e=f[t=t+1&l]}return f[t]=r,s[t]=n},get:function(r,n){for(var t=i(r)&l,e=f[t],o=0;e!=c;){if(u(e,r))return s[t];if(++o>=a)break;e=f[t=t+1&l]}return n},keys:function(){for(var r=[],n=0,t=f.length;n<t;++n){var e=f[n];e!=c&&r.push(e)}return r}}},S=function(r,n){return r[0]===n[0]&&r[1]===n[1]},w=new ArrayBuffer(16),G=new Uint32Array(w),j=function(r){var n=G[0]^G[1];return 2147483647&(n<<5^n>>7^G[2]^G[3])},w=Math.PI,V=2*w,_=w/4,I=w/180,W=Math.abs,B=Math.atan2,T=Math.cos,F=Math.sin;r.bbox=b,r.feature=c,r.mesh=function(r){return s(r,n.apply(this,arguments))},r.meshArcs=n,r.merge=function(r){return s(r,e.apply(this,arguments))},r.mergeArcs=e,r.neighbors=function(r){function t(r,t){r.forEach(function(r){var n=o[r=r<0?~r:r];n?n.push(t):o[r]=[t]})}function e(r,n){r.forEach(function(r){t(r,n)})}var n,o={},a=r.map(function(){return[]}),i={LineString:t,MultiLineString:e,Polygon:e,MultiPolygon:function(r,n){r.forEach(function(r){e(r,n)})}};for(n in r.forEach(function n(r,t){"GeometryCollection"===r.type?r.geometries.forEach(function(r){n(r,t)}):r.type in i&&i[r.type](r.arcs,t)}),o)for(var u=o[n],c=u.length,f=0;f<c;++f)for(var s=f+1;s<c;++s){var l,h=u[f],p=u[s];(l=a[h])[n=d(l,p)]!==p&&l.splice(n,0,p),(l=a[p])[n=d(l,h)]!==h&&l.splice(n,0,h)}return a},r.quantize=function(r,n){function t(r){return l(r)}function e(r){var n;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(e)};break;case"Point":n={type:"Point",coordinates:t(r.coordinates)};break;case"MultiPoint":n={type:"MultiPoint",coordinates:r.coordinates.map(t)};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}if(r.transform)throw new Error("already quantized");if(n&&n.scale)f=r.bbox;else{if(!(2<=(o=Math.floor(n))))throw new Error("n must be 2");var o,a=(f=r.bbox||b(r))[0],i=f[1],u=f[2],c=f[3];n={scale:[u-a?(u-a)/(o-1):1,c-i?(c-i)/(o-1):1],translate:[a,i]}}var f,s,l=E(n),h=r.objects,p={};for(s in h)p[s]=e(h[s]);return{type:"Topology",bbox:f,transform:n,objects:p,arcs:r.arcs.map(function(r){var n,t=0,e=1,o=r.length,a=new Array(o);for(a[0]=l(r[0],0);++t<o;)((n=l(r[t],t))[0]||n[1])&&(a[e++]=n);return 1===e&&(a[e++]=[0,0]),a.length=e,a})}},r.transform=v,r.untransform=E,r.topology=function(r,n){function t(r){r&&s.hasOwnProperty(r.type)&&s[r.type](r)}function e(r){var n=[];do{var t=f.get(r)}while(n.push(r[0]<r[1]?t:~t),r=r.next);return n}function o(r){return r.map(e)}var a,i=function(r){function n(r){null!=r&&s.hasOwnProperty(r.type)&&s[r.type](r)}function t(r){var n=r[0],r=r[1];n<i&&(i=n),c<n&&(c=n),r<u&&(u=r),f<r&&(f=r)}function e(r){r.forEach(t)}function o(r){r.forEach(e)}var a,i=1/0,u=1/0,c=-1/0,f=-1/0,s={GeometryCollection:function(r){r.geometries.forEach(n)},Point:function(r){t(r.coordinates)},MultiPoint:function(r){r.coordinates.forEach(t)},LineString:function(r){e(r.arcs)},MultiLineString:function(r){r.arcs.forEach(e)},Polygon:function(r){r.arcs.forEach(e)},MultiPolygon:function(r){r.arcs.forEach(o)}};for(a in r)n(r[a]);return i<=c&&u<=f?[i,u,c,f]:void 0}(r=function(r){var n,t={};for(n in r)t[n]=l(r[n]);return t}(r)),n=0<n&&i&&function(r,n,t){function e(r){return[Math.round((r[0]-s)*p),Math.round((r[1]-l)*g)]}function o(r,n){for(var t,e,o,a,i=-1,u=0,c=r.length,f=new Array(c);++i<c;)a=r[i],o=Math.round((a[0]-s)*p),a=Math.round((a[1]-l)*g),o===t&&a===e||(f[u++]=[t=o,e=a]);for(f.length=u;u<n;)u=f.push([f[0][0],f[0][1]]);return f}function a(r){return o(r,2)}function i(r){return o(r,4)}function u(r){return r.map(i)}function c(r){null!=r&&y.hasOwnProperty(r.type)&&y[r.type](r)}var f,s=n[0],l=n[1],h=n[2],n=n[3],p=h-s?(t-1)/(h-s):1,g=n-l?(t-1)/(n-l):1,y={GeometryCollection:function(r){r.geometries.forEach(c)},Point:function(r){r.coordinates=e(r.coordinates)},MultiPoint:function(r){r.coordinates=r.coordinates.map(e)},LineString:function(r){r.arcs=a(r.arcs)},MultiLineString:function(r){r.arcs=r.arcs.map(a)},Polygon:function(r){r.arcs=u(r.arcs)},MultiPolygon:function(r){r.arcs=r.arcs.map(u)}};for(f in r)c(r[f]);return{scale:[1/p,1/g],translate:[s,l]}}(r,i,n),u=z(U(function(r){function n(r){r&&s.hasOwnProperty(r.type)&&s[r.type](r)}function t(r){for(var n=0,t=r.length;n<t;++n)f[++i]=r[n];var e={0:i-t+1,1:i};return u.push(e),e}function e(r){for(var n=0,t=r.length;n<t;++n)f[++i]=r[n];var e={0:i-t+1,1:i};return c.push(e),e}function o(r){return r.map(e)}var a,i=-1,u=[],c=[],f=[],s={GeometryCollection:function(r){r.geometries.forEach(n)},LineString:function(r){r.arcs=t(r.arcs)},MultiLineString:function(r){r.arcs=r.arcs.map(t)},Polygon:function(r){r.arcs=r.arcs.map(e)},MultiPolygon:function(r){r.arcs=r.arcs.map(o)}};for(a in r)n(r[a]);return{type:"Topology",coordinates:f,lines:u,rings:c,objects:r}}(r))),c=u.coordinates,f=k(1.4*u.arcs.length,h,p),s=(r=u.objects,u.bbox=i,u.arcs=u.arcs.map(function(r,n){return f.set(r,n),c.slice(r[0],r[1]+1)}),delete u.coordinates,c=null,{GeometryCollection:function(r){r.geometries.forEach(t)},LineString:function(r){r.arcs=e(r.arcs)},MultiLineString:function(r){r.arcs=r.arcs.map(e)},Polygon:function(r){r.arcs=r.arcs.map(e)},MultiPolygon:function(r){r.arcs=r.arcs.map(o)}});for(a in r)t(r[a]);return n&&(u.transform=n,u.arcs=function(r){for(var n=-1,t=r.length;++n<t;){for(var e,o,a=r[n],i=0,u=1,c=a.length,f=a[0],s=f[0],l=f[1];++i<c;)e=(f=a[i])[0],o=f[1],e===s&&o===l||(a[u++]=[e-s,o-l],s=e,l=o);1===u&&(a[u++]=[0,0]),a.length=u}return r}(u.arcs)),u},r.filter=function(r,t){function e(r){var n,t;switch(r.type){case"Polygon":n=(t=o(r.arcs))?{type:"Polygon",arcs:t}:{type:null};break;case"MultiPolygon":n=(t=r.arcs.map(o).filter(L)).length?{type:"MultiPolygon",arcs:t}:{type:null};break;case"GeometryCollection":n=(t=r.geometries.map(e).filter(C)).length?{type:"GeometryCollection",geometries:t}:{type:null};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function o(r){return r.length&&(n=r[0],t(n,!1))?[r[0]].concat(r.slice(1).filter(a)):null;var n}function a(r){return t(r,!0)}var n,i=r.objects,u={};for(n in null==t&&(t=A),i)u[n]=e(i[n]);r={type:"Topology",bbox:r.bbox,transform:r.transform,objects:u,arcs:r.arcs};function c(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(c);break;case"LineString":s(r.arcs);break;case"MultiLineString":case"Polygon":r.arcs.forEach(s);break;case"MultiPolygon":r.arcs.forEach(l)}}function f(r){x[r=r<0?~r:r]||(x[r]=1,++w)}function s(r){r.forEach(f)}function l(r){r.forEach(s)}function h(r){var n;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(h)};break;case"LineString":n={type:"LineString",arcs:g(r.arcs)};break;case"MultiLineString":n={type:"MultiLineString",arcs:r.arcs.map(g)};break;case"Polygon":n={type:"Polygon",arcs:r.arcs.map(g)};break;case"MultiPolygon":n={type:"MultiPolygon",arcs:r.arcs.map(y)};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function p(r){return r<0?~x[~r]:x[r]}function g(r){return r.map(p)}function y(r){return r.map(g)}var v,b,m=r.objects,d={},M=r.arcs,E=M.length,P=-1,x=new Array(E),w=0,k=-1;for(b in m)c(m[b]);for(v=new Array(w);++P<E;)x[P]&&(x[P]=++k,v[k]=M[P]);for(b in m)d[b]=h(m[b]);return{type:"Topology",bbox:r.bbox,transform:r.transform,objects:d,arcs:v}},r.filterAttached=f,r.filterAttachedWeight=function(r,n,t){var e=f(r),o=P(r,n,t);return function(r,n){return e(r,n)||o(r,n)}},r.filterWeight=P,r.planarRingArea=i,r.planarTriangleArea=g,r.presimplify=function(r,c){function f(r){l.remove(r),r[1][2]=c(r),l.push(r)}var i,u,s=r.transform?v(r.transform):N,l=(i=[],u=0,(n={}).push=function(r){return e(i[r._=u]=r,u++),u},n.pop=function(){var r,n;if(!(u<=0))return n=i[0],0<--u&&o(i[(r=i[u])._=0]=r,0),n},n.remove=function(r){var n,t=r._;if(i[t]===r)return t!==--u&&(y(n=i[u],r)<0?e:o)(i[n._=t]=n,t),t},n);function e(r,n){for(;0<n;){var t=(n+1>>1)-1,e=i[t];if(0<=y(r,e))break;i[e._=n]=e,i[r._=n=t]=r}}function o(r,n){for(;;){var t=n+1<<1,e=t-1,o=n,a=i[o];if(e<u&&y(i[e],a)<0&&(a=i[o=e]),t<u&&y(i[t],a)<0&&(a=i[o=t]),o===n)break;i[a._=n]=a,i[r._=n=o]=r}}null==c&&(c=g);var n=r.arcs.map(function(r){for(var n,t=[],e=0,o=1,a=(r=r.map(s)).length-1;o<a;++o)(n=[r[o-1],r[o],r[o+1]])[1][2]=c(n),t.push(n),l.push(n);for(r[0][2]=r[a][2]=1/0,o=0,a=t.length;o<a;++o)(n=t[o]).previous=t[o-1],n.next=t[o+1];for(;n=l.pop();){var i=n.previous,u=n.next;n[1][2]<e?n[1][2]=e:e=n[1][2],i&&(i.next=u,i[2]=n[2],f(i)),u&&(u.previous=i,u[0]=n[0],f(u))}return r});return{type:"Topology",bbox:r.bbox,objects:r.objects,arcs:n}},r.quantile=function(r,n){var t=[];return r.arcs.forEach(function(r){r.forEach(function(r){isFinite(r[2])&&t.push(r[2])})}),t.length&&function(r,n){var t,e;if(t=r.length)return(n=+n)<=0||t<2?r[0]:1<=n?r[t-1]:(t=(t-1)*n,(e=r[n=Math.floor(t)])+(r[n+1]-e)*(t-n))}(t.sort(O),n)},r.simplify=function(r,i){i=null==i?Number.MIN_VALUE:+i;var n=r.arcs.map(function(r){for(var n,t=-1,e=0,o=r.length,a=new Array(o);++t<o;)(n=r[t])[2]>=i&&(a[e++]=[n[0],n[1]]);return a.length=e,a});return{type:"Topology",transform:r.transform,bbox:r.bbox,objects:r.objects,arcs:n}},r.sphericalRingArea=function(r,n){r=u(r,!0);return n&&(r*=-1),2*(r<0?V+r:r)},r.sphericalTriangleArea=function(r){return 2*W(u(r,!1))},Object.defineProperty(r,"__esModule",{value:!0})});